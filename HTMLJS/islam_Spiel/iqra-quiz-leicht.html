<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>IQRA! ‚Äì Quiz zu den ersten Offenbarungen (neu)</title>
    <meta name="color-scheme" content="light dark">
    <style>
        /* ====== DESIGN: hell/dunkel + hoher Kontrast ====== */
        :root {
            --bg: #0b1220;
            --panel: #0f172a;
            --card: #121a2a;
            --text: #f8fafc;
            --muted: #cbd5e1;
            --sub: #9aa6b2;
            --b1: #334155;
            --b2: #475569;
            --accent: #22c55e;
            --accent2: #38bdf8;
            --danger: #ef4444;
            --warn: #f59e0b;
            --ok: #16a34a;
            --btn: #1f2937;
            --btn-border: #334155;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f4f7fb;
                --panel: #ffffff;
                --card: #ffffff;
                --text: #0b1220;
                --muted: #334155;
                --sub: #475569;
                --b1: #cbd5e1;
                --b2: #94a3b8;
                --btn: #e2e8f0;
                --btn-border: #cbd5e1;
            }
        }

        body.high-contrast {
            --text: #ffffff;
            --muted: #e5e7eb;
            --sub: #e2e8f0;
            --bg: #0a0f1a;
            --panel: #0a1224;
            --card: #0c1428;
            --b1: #5b86ff;
            --b2: #5b86ff;
            --btn-border: #5b86ff;
        }

        /* ====== RESET ====== */
        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font: 18px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
            background: linear-gradient(180deg, var(--bg), #050a14 120%);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        :focus {
            outline: 2px solid transparent
        }

        :focus-visible {
            outline: 3px solid #5b86ff;
            outline-offset: 2px;
            border-radius: 10px
        }

        /* ====== LAYOUT ====== */
        .wrap {
            width: min(1100px, 100%);
            margin: auto
        }

        .glass {
            background: var(--panel);
            border: 1px solid var(--b1);
            border-radius: 22px;
            padding: 18px;
            box-shadow: 0 20px 80px #0005, inset 0 1px 0 #ffffff15;
        }

        header {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap
        }

        h1 {
            font-size: clamp(22px, 3vw, 30px);
            margin: 0
        }

        .subtitle {
            font-size: 14px;
            color: var(--sub);
            margin-top: 4px
        }

        .tag {
            font-weight: 800;
            font-size: 13px;
            padding: 6px 10px;
            border-radius: 999px;
            background: linear-gradient(135deg, #22c55e, #38bdf8);
            color: #081018
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px
        }

        /* ====== BUTTONS ====== */
        .btn {
            appearance: none;
            border: 1px solid var(--btn-border);
            background: var(--btn);
            color: var(--text);
            padding: 10px 14px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: .15s transform, .15s filter;
        }

        .btn:hover {
            transform: translateY(-1px)
        }

        .btn:active {
            transform: translateY(0)
        }

        .btn.primary {
            background: linear-gradient(180deg, #16a34a, #0e7a39);
            border-color: #0b5f2d;
            color: #fff
        }

        .btn.ghost {
            background: transparent
        }

        .btn.small {
            padding: 7px 10px;
            font-weight: 600
        }

        /* ====== GRID ====== */
        .grid {
            display: grid;
            gap: 16px;
            grid-template-columns: 1.3fr .7fr;
            margin-top: 12px
        }

        @media (max-width:900px) {
            .grid {
                grid-template-columns: 1fr
            }
        }

        /* ====== CARDS ====== */
        .card {
            background: var(--card);
            border: 1px solid var(--b1);
            border-radius: 16px;
            padding: 16px
        }

        .stat {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            border: 1px solid var(--b1);
            border-radius: 12px
        }

        /* ====== QUESTION ====== */
        .q-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 14px;
            margin-bottom: 10px
        }

        .q-title {
            font-weight: 800;
            font-size: 20px
        }

        .category {
            font-size: 13px;
            color: var(--sub)
        }

        .progress {
            height: 10px;
            background: #0b1220;
            border: 1px solid var(--b2);
            border-radius: 999px;
            overflow: hidden
        }

        .progress>div {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent), var(--accent2));
            transition: width .4s ease
        }

        .timerbar {
            height: 8px;
            background: #0b1220;
            border: 1px solid var(--b2);
            border-radius: 999px;
            overflow: hidden;
            margin-top: 6px
        }

        .timerbar>div {
            height: 100%;
            background: linear-gradient(90deg, var(--warn), var(--danger));
            width: 100%;
            transition: width 1s linear
        }

        /* ====== ANSWERS (LESBAR!) ====== */
        .answers {
            display: grid;
            gap: 10px
        }

        .answer {
            text-align: left;
            font-weight: 700;
            padding: 14px 16px;
            border-radius: 14px;
            border: 2px solid var(--b1);
            background: #172036;
            color: #ffffff;
            /* HOHER KONTRAST */
            line-height: 1.35;
            letter-spacing: .2px;
            cursor: pointer;
            transition: .12s transform, .12s background, .12s border-color, .12s box-shadow;
            box-shadow: inset 0 1px 0 #ffffff15;
        }

        .answer:hover {
            transform: translateY(-1px);
            background: #1c2742;
            border-color: #5b86ff
        }

        .answer:focus-visible {
            box-shadow: 0 0 0 3px #5b86ff66
        }

        .answer.correct {
            background: #0f2a17;
            border-color: #16a34a;
            color: #dcfce7
        }

        .answer.wrong {
            background: #2a1313;
            border-color: #ef4444;
            color: #fee2e2
        }

        .answer[disabled] {
            opacity: .95
        }

        .explain {
            margin-top: 12px;
            font-size: 15px;
            color: var(--muted)
        }

        /* ====== MISC ====== */
        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px
        }

        .chip {
            font-size: 12px;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px dashed var(--b2);
            color: var(--text)
        }

        .right {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: flex-end
        }

        .center {
            text-align: center
        }

        .toast {
            position: fixed;
            inset: auto 0 18px 0;
            display: flex;
            justify-content: center;
            pointer-events: none
        }

        .toast>div {
            pointer-events: auto;
            background: var(--card);
            border: 1px solid var(--b1);
            padding: 10px 14px;
            border-radius: 12px
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div class="glass">
            <header>
                <div>
                    <h1>IQRA! ‚Äì Quiz zu den ersten Offenbarungen</h1>
                    <div class="subtitle">Verse: <em>Al- øAlaq 1‚Äì5</em>, <em>Al-Qalam 1‚Äì7</em>, <em>Al-Muzzammil
                            1‚Äì8</em>, <em>Al-Muddassir 1‚Äì7</em></div>
                    <div class="toolbar" role="toolbar" aria-label="Hauptaktionen">
                        <button class="btn primary" id="startBtn">Neues Spiel</button>
                        <button class="btn" id="allBtn">Alle Kategorien</button>
                        <button class="btn ghost" id="bAlaq">Al- øAlaq</button>
                        <button class="btn ghost" id="bQalam">Al-Qalam</button>
                        <button class="btn ghost" id="bMuzz">Al-Muzzammil</button>
                        <button class="btn ghost" id="bMudd">Al-Muddassir</button>
                        <span class="btn small" id="modeBtn" title="Hell/Dunkel umschalten">Light/Dark</span>
                        <span class="btn small" id="contrastBtn" title="Kontrast erh√∂hen">High Contrast</span>
                    </div>
                </div>
                <span class="tag">Bismillah ‚Ä¢ Lerne & wachse</span>
            </header>

            <div class="grid">
                <!-- MAIN -->
                <main class="card" aria-live="polite">
                    <div class="q-head">
                        <div>
                            <div class="category" id="category">Kategorie: ‚Äî</div>
                            <div class="q-title" id="question">Dr√ºcke ‚ÄûNeues Spiel‚Äú.</div>
                        </div>
                        <div style="min-width:200px">
                            <div class="progress" aria-hidden="true">
                                <div id="progress"></div>
                            </div>
                            <div class="timerbar" aria-hidden="true">
                                <div id="timerbar"></div>
                            </div>
                        </div>
                    </div>

                    <div class="answers" id="answers" role="listbox" aria-label="Antworten"></div>
                    <div class="explain" id="explain" hidden></div>

                    <div class="right" style="margin-top:10px">
                        <button class="btn" id="skipBtn">√úberspringen (‚àí1 Leben)</button>
                        <button class="btn ghost" id="fiftyBtn">50:50</button>
                        <button class="btn ghost" id="hintBtn">Hinweis</button>
                        <button class="btn ghost" id="retryBtn">Nochmal</button>
                    </div>
                </main>

                <!-- SIDE -->
                <aside class="card" aria-label="Status">
                    <div class="stat"><span>Score</span><span id="score">0</span></div>
                    <div class="stat"><span>Streak</span><span id="streak">0</span></div>
                    <div class="stat"><span>Zeit / Frage</span><span id="secs">20s</span></div>
                    <div class="stat"><span id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span><span id="lives">3 Leben</span></div>

                    <div class="card" style="margin-top:12px">
                        <div style="font-weight:800; margin-bottom:6px">Themen-Tags</div>
                        <div class="chips" id="tags"></div>
                    </div>

                    <div class="card center" style="margin-top:12px">
                        <div style="font-weight:800; margin-bottom:6px">Quelle / Inspiration</div>
                        <div class="subtitle">‚ÄûDie ersten Offenbarungen ‚Äì Was will Allah uns mitteilen?‚Äú (Arbeitsblatt)
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <div class="toast" id="toast" style="display:none">
            <div id="toastMsg">üëç</div>
        </div>
    </div>

    <script>
        /* ========== FRAGEPOOL ========== */
        const POOL = [
            // Al- øAlaq
            {
                cat: "Al- øAlaq 1‚Äì5", tags: ["Iqra!", "Wissen", "Schreibrohr"],
                q: "Was ist die allererste Anweisung in Al- øAlaq?", choices: ["Bete!", "Lies! (Iqra)", "K√§mpfe!", "Spende!"], a: 1,
                hint: "Es stellt Bildung √ºber Aktion.", exp: "Die Offenbarung beginnt mit ‚ÄûLies!‚Äú ‚Äì Lernen im Namen Allahs."
            },
            {
                cat: "Al- øAlaq 1‚Äì5", tags: ["Sch√∂pfung", "Demut"],
                q: "Woraus erschuf Allah den Menschen laut Al- øAlaq?", choices: ["Aus Licht", "Aus Lehm", "Aus einem Blutklumpen", "Aus Wind"], a: 2,
                hint: "Bescheidener Ursprung.", exp: "‚ÄûEr erschuf den Menschen aus einem Blutklumpen.‚Äú"
            },
            {
                cat: "Al- øAlaq 1‚Äì5", tags: ["Schreibrohr", "Wissen"],
                q: "Was lehrt Allah den Menschen gem√§√ü den Versen 3‚Äì5 besonders?", choices: ["Handwerk", "Mut", "Mit dem Schreibrohr (Schreiben)", "Kriegsf√ºhrung"], a: 2,
                hint: "Weitergabe von Wissen.", exp: "Lehren durch das Schreibrohr: Schrift & Wissen."
            },

            // Al-Qalam
            {
                cat: "Al-Qalam 1‚Äì7", tags: ["Charakter", "Vorbild"],
                q: "Wof√ºr wird der Prophet Ô∑∫ in Al-Qalam hervorgehoben?", choices: ["Reichtum", "Macht", "Gro√üartigen Charakter", "Wissenschaft"], a: 2,
                hint: "Akhlaq.", exp: "‚ÄûUnd du bist wahrlich von gro√üartigem Charakter.‚Äú"
            },
            {
                cat: "Al-Qalam 1‚Äì7", tags: ["Belohnung", "Trost"],
                q: "Wie wird die Belohnung beschrieben?", choices: ["Ungewiss", "Zuf√§llig", "Unterbrochen", "Ununterbrochen"], a: 3,
                hint: "Kontinuit√§t.", exp: "Es gibt einen ‚Äûununterbrochenen Lohn‚Äú."
            },
            {
                cat: "Al-Qalam 1‚Äì7", tags: ["Standhaftigkeit", "Pr√ºfung"],
                q: "‚ÄûDu wirst sehen und sie werden sehen‚Äú deutet an ‚Ä¶", choices: ["Sofortigen Sieg", "Zuk√ºnftige Kl√§rung & Pr√ºfung", "Niedergang der Muslime", "Ende der Offenbarung"], a: 1,
                hint: "Geduld, bis Allah kl√§rt.", exp: "Es wird sich zeigen, wer rechtgeleitet ist."
            },

            // Al-Muzzammil
            {
                cat: "Al-Muzzammil 1‚Äì8", tags: ["Nachtgebet", "Disziplin"],
                q: "Welche Praxis wird betont?", choices: ["Fasten am Tag", "Nachtgebet & ruhige Rezitation", "J√§hrliche Hajj", "Monatliche Zakat"], a: 1,
                hint: "St√§rkt Herz & Fokus.", exp: "‚ÄûSteh (zum Gebet) in der Nacht ‚Ä¶ rezitiere in Ruhe.‚Äú"
            },
            {
                cat: "Al-Muzzammil 1‚Äì8", tags: ["Schwere Botschaft", "Vorbereitung"],
                q: "Warum wird das Nachtgebet empfohlen?", choices: ["Einfacher als tags√ºber", "Tags√ºber ist Beten verboten", "Schwere Botschaft kommt ‚Äì Herz vorbereiten", "Nur f√ºr Gelehrte"], a: 2,
                hint: "Innere St√§rke.", exp: "‚ÄûWir werden dir eine schwere Botschaft auferlegen.‚Äú"
            },

            // Al-Muddassir
            {
                cat: "Al-Muddassir 1‚Äì7", tags: ["Da øwa", "Reinheit"],
                q: "Welche zwei Auftr√§ge stehen am Anfang?", choices: ["Essen & Schlafen", "Warnen und Kleidung reinigen", "Reisen & Handeln", "Lesen & Schreiben"], a: 1,
                hint: "Inneres + √Ñu√üeres.", exp: "‚ÄûSteh auf und warne ‚Ä¶ reinige deine Kleidung.‚Äú"
            },
            {
                cat: "Al-Muddassir 1‚Äì7", tags: ["Aufrichtigkeit", "Absicht"],
                q: "Was soll man NICHT tun, wenn man gibt?", choices: ["Geben verschweigen", "Prahlend geben / Gegenleistung erwarten", "Nachts geben", "In kleinen Betr√§gen geben"], a: 1,
                hint: "Ikhlas.", exp: "Nicht geben in Erwartung von Gegenleistung."
            },
            {
                cat: "Al-Muddassir 1‚Äì7", tags: ["Geduld", "Sabr"],
                q: "Wof√ºr soll man standhaft sein?", choices: ["F√ºr Ruhm", "F√ºr Reichtum", "Um des Herrn willen", "F√ºr die Gruppe"], a: 2,
                hint: "Absicht z√§hlt.", exp: "‚ÄûUnd sei standhaft um deines Herrn willen.‚Äú"
            },

            // Anwendung
            {
                cat: "Anwendung", tags: ["Wissen", "Heute"],
                q: "Warum beginnt der Islam mit ‚ÄûLies!‚Äú ‚Äì heute besonders wichtig wegen ‚Ä¶", choices: ["Oberfl√§chlichem Scrollen", "Wissensaufbau mit Verantwortung", "Nur Unterhaltung", "Nur Kalligraphie"], a: 1,
                hint: "Tief lernen.", exp: "Bildung, kritisches Lesen, Umsetzen im Alltag."
            },
            {
                cat: "Begriff", tags: ["Rabb", "R-B-B"],
                q: "Die Wurzel R-B-B h√§ngt zusammen mit ‚Ä¶", choices: ["Zerst√∂rung", "Erziehung, Pflege, Entwicklung", "Handel", "Krieg"], a: 1,
                hint: "Aufziehen/Entwickeln.", exp: "R-B-B ‚Üí Erziehen, Pflegen, Entwickeln."
            },
            {
                cat: "Praxis", tags: ["Innen/Au√üen", "Balance"],
                q: "Welche Balance zeigen Al-Muzzammil & Al-Muddassir zusammen?", choices: ["Nur innerlich", "Nur Aktivismus", "Innere Vorbereitung + √§u√üerer Auftrag", "Nur Studium"], a: 2,
                hint: "Herz st√§rken & wirken.", exp: "Nachts st√§rken (Qiyam), tags√ºber wirken (Da øwa)."
            }
        ];

        /* ========== STATE ========== */
        const S = { timePerQ: 20, lives: 3, score: 0, streak: 0, idx: 0, order: [], current: null, used50: false, usedHint: false, filter: null, timer: null, left: 20 };

        /* ========== DOM ========== */
        const elQ = document.getElementById('question');
        const elA = document.getElementById('answers');
        const elCat = document.getElementById('category');
        const elTags = document.getElementById('tags');
        const elExplain = document.getElementById('explain');
        const elScore = document.getElementById('score');
        const elStreak = document.getElementById('streak');
        const elLives = document.getElementById('lives');
        const elHearts = document.getElementById('hearts');
        const elProg = document.getElementById('progress');
        const elTimer = document.getElementById('timerbar').firstElementChild;
        const elSecs = document.getElementById('secs');
        const toast = document.getElementById('toast'); const toastMsg = document.getElementById('toastMsg');

        /* ========== HELPERS ========== */
        const $ = s => document.querySelector(s);
        const shuffle = arr => arr.map(v => [Math.random(), v]).sort((a, b) => a[0] - b[0]).map(x => x[1]);
        function showToast(msg) { toastMsg.textContent = msg; toast.style.display = 'flex'; setTimeout(() => toast.style.display = 'none', 1200); }
        function sampleOrder() {
            const list = S.filter ? POOL.filter(p => p.cat.startsWith(S.filter)) : POOL.slice();
            return shuffle(list).map(q => ({ ref: q }));
        }
        function updateHUD() {
            elScore.textContent = S.score; elStreak.textContent = S.streak; elLives.textContent = `${S.lives} Leben`;
            elHearts.textContent = "‚ù§Ô∏è".repeat(Math.max(0, S.lives)) + "üñ§".repeat(3 - Math.max(0, S.lives));
            elSecs.textContent = `${S.timePerQ}s`;
            elProg.style.width = `${(S.idx / (S.order.length || 1)) * 100}%`;
        }

        /* ========== GAME FLOW ========== */
        function startGame() {
            Object.assign(S, { lives: 3, score: 0, streak: 0, idx: 0, used50: false, usedHint: false });
            S.order = sampleOrder();
            updateHUD(); nextQuestion();
        }
        function nextQuestion() {
            if (S.lives <= 0) return gameOver();
            if (S.idx >= S.order.length) return finish();
            S.current = S.order[S.idx++].ref;
            renderQuestion();
        }
        function renderQuestion() {
            const q = S.current;
            elExplain.hidden = true;
            elQ.textContent = q.q;
            elCat.textContent = `Kategorie: ${q.cat}`;
            elA.innerHTML = '';
            q.tags && (elTags.innerHTML = '', q.tags.forEach(t => {
                const s = document.createElement('span'); s.className = 'chip'; s.textContent = t; elTags.appendChild(s);
            }));
            // Antworten erstellen (zug√§nglich & lesbar)
            q.choices.forEach((c, idx) => {
                const b = document.createElement('button');
                b.className = 'answer'; b.setAttribute('role', 'option'); b.textContent = c;
                b.onclick = () => check(idx, b);
                b.onkeyup = (e) => { if (e.key === 'Enter' || e.key === ' ') b.click(); };
                elA.appendChild(b);
            });
            S.used50 = false; S.usedHint = false;
            $('#fiftyBtn').disabled = false; $('#hintBtn').disabled = false;
            startTimer(); updateHUD();
        }
        function startTimer() {
            clearInterval(S.timer); S.left = S.timePerQ; elTimer.style.width = '100%';
            S.timer = setInterval(() => { S.left--; elTimer.style.width = `${(S.left / S.timePerQ) * 100}%`; if (S.left <= 0) { clearInterval(S.timer); timesUp(); } }, 1000);
        }
        function timesUp() {
            lock(); loseLife();
            explain(`‚è≥ Zeit abgelaufen. ${S.current.exp}`);
            showToast('‚è≥ Zeit ist um!');
            setTimeout(nextQuestion, 900);
        }
        function lock() { [...elA.children].forEach(b => b.disabled = true); }
        function explain(text) { elExplain.hidden = false; elExplain.innerHTML = text; }

        function check(idx, btn) {
            clearInterval(S.timer); lock();
            const ok = idx === S.current.a;
            if (ok) {
                btn.classList.add('correct');
                const pts = 100 + Math.min(50, S.streak * 10) + Math.floor((S.left / S.timePerQ) * 50);
                S.score += pts; S.streak++;
                explain(`‚úÖ <strong>Korrekt.</strong> ${S.current.exp}<br><span class="subtitle">+${pts} Punkte</span>`);
                showToast('‚úÖ Richtig!');
            } else {
                btn.classList.add('wrong');
                elA.children[S.current.a].classList.add('correct');
                S.streak = 0; loseLife();
                explain(`‚ùå <strong>Leider falsch.</strong> ${S.current.exp}`);
                showToast('‚ùå Falsch');
            }
            updateHUD();
            setTimeout(nextQuestion, 900);
        }
        function loseLife() {
            S.lives--; updateHUD();
            if (S.lives <= 0) gameOver();
        }
        function finish() {
            clearInterval(S.timer); lock();
            elQ.textContent = "Mashallah! Du hast die Runde abgeschlossen.";
            elA.innerHTML = "";
            explain(`üèÅ Endscore: <strong>${S.score}</strong> ‚Ä¢ Beste Streak: <strong>${S.streak}</strong><br>Tipp: Spiele eine einzelne Kategorie, um zu vertiefen.`);
        }
        function gameOver() {
            clearInterval(S.timer); lock();
            elQ.textContent = "Game Over ‚Äì neues Spiel starten?";
            elA.innerHTML = "";
            explain(`Dein Score: <strong>${S.score}</strong>. Mit Qiyam, Ikhlas & Wissen klappt‚Äôs n√§chstes Mal noch besser.`);
        }

        /* ========== LIFELINES ========== */
        $('#fiftyBtn').onclick = () => {
            if (S.used50 || !S.current) return; S.used50 = true; $('#fiftyBtn').disabled = true;
            const wrong = [0, 1, 2, 3].filter(i => i !== S.current.a); shuffle(wrong).slice(0, 2).forEach(i => {
                const b = elA.children[i]; b.disabled = true; b.style.opacity = .6;
            });
            showToast('ü™Ñ 50:50');
        };
        $('#hintBtn').onclick = () => {
            if (S.usedHint || !S.current) return; S.usedHint = true; $('#hintBtn').disabled = true;
            explain(`üí° Hinweis: ${S.current.hint}`);
            showToast('üí° Hinweis');
        };
        $('#retryBtn').onclick = () => {
            if (!S.current) return;
            const keep = S.current;
            const withIdx = keep.choices.map((c, i) => ({ c, i })); const sh = shuffle(withIdx);
            keep.choices = sh.map(x => x.c); keep.a = sh.findIndex(x => x.i === keep.a);
            renderQuestion(); showToast('üîÑ Neu gemischt');
        };

        /* ========== CONTROLS ========== */
        document.getElementById('startBtn').onclick = startGame;
        document.getElementById('skipBtn').onclick = () => { if (!S.current) return; loseLife(); showToast('‚è≠Ô∏è √úbersprungen'); nextQuestion(); };

        function setFilter(f) { S.filter = f; startGame(); }
        document.getElementById('allBtn').onclick = () => setFilter(null);
        document.getElementById('bAlaq').onclick = () => setFilter('Al- øAlaq');
        document.getElementById('bQalam').onclick = () => setFilter('Al-Qalam');
        document.getElementById('bMuzz').onclick = () => setFilter('Al-Muzzammil');
        document.getElementById('bMudd').onclick = () => setFilter('Al-Muddassir');

        // Tastatur: 1-4 Antworten, N neu, S skip
        window.addEventListener('keydown', (e) => {
            if (e.key === 'n' || e.key === 'N') startGame();
            if (e.key === 's' || e.key === 'S') document.getElementById('skipBtn').click();
            const n = parseInt(e.key, 10); if (n >= 1 && n <= 4 && elA.children[n - 1]) elA.children[n - 1].click();
        });

        // Light/Dark & High-Contrast Toggles
        document.getElementById('modeBtn').onclick = () => {
            // einfache Umschaltung √ºber prefers-color-scheme imitieren
            document.documentElement.style.colorScheme =
                (document.documentElement.style.colorScheme === 'light') ? 'dark' :
                    (document.documentElement.style.colorScheme === 'dark') ? 'light' : 'dark';
        };
        document.getElementById('contrastBtn').onclick = () => {
            document.body.classList.toggle('high-contrast');
        };
    </script>
</body>

</html>